"use strict";

import { basename } from "path";
import { createInstrumenter } from "istanbul-lib-instrument";

export function instrumentCodeSync(name, code) {
	const instrumenter = createInstrumenter({
		coverageVariable: "__coverage__",
		esModules: true,
	});
	const instrumented = instrumenter.instrumentSync(code, basename(name));
	return instrumented;
}

export default instrumentCodeSync;
